<div class="text-node" [style.margin-right.px]="(level() - 1) * 24">
  <div class="node-header">
    <span class="level-badge">Level {{ level() }}</span>
    <input
      class="label-input"
      type="text"
      [value]="node().label"
      (input)="onLabelInput($event)"
      placeholder="Click to add label"
    />
    <button class="delete-btn" (click)="onDelete()" title="Delete section">&times;</button>
  </div>

  @for (item of node().children; track $index) {
    @if (isString(item)) {
      <wa-textarea
        class="text-area"
        dir="rtl"
        resize="auto"
        [attr.data-node-id]="node().id"
        [attr.data-content-index]="$index"
        [value]="item"
        (input)="onTextInput($event, $index)"
        (keydown)="onKeydown($event, waTextarea, $index)"
        #waTextarea
        placeholder="Enter text here..."
      ></wa-textarea>
    } @else {
      <app-text-node
        [node]="item"
        [level]="level() + 1"
        (nodeKeydown)="onChildKeydown($event)"
        (textChange)="onChildTextChange($event)"
        (labelChange)="onChildLabelChange($event)"
        (deleteNode)="onChildDelete($event)"
      />
    }
  }
</div>
